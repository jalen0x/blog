<div class="flex gap-8" data-controller="toc">
  <!-- Left Sidebar TOC (Desktop) -->
  <aside class="hidden lg:block lg:w-64 flex-shrink-0">
    <div class="sticky top-8">
      <h3 class="text-lg font-semibold text-gray-900 mb-4">目录</h3>
      <nav data-toc-target="nav" class="text-sm">
        <!-- TOC will be generated here by JavaScript -->
      </nav>
    </div>
  </aside>

  <!-- Main Article Content -->
  <article class="prose prose-lg flex-1 min-w-0" data-toc-target="content">
    <h1 class="text-4xl font-bold mb-2 text-gray-900"><%= @post.title %></h1>
    <time class="text-sm text-gray-500 block mb-8"><%= @post.formatted_date %></time>

    <div class="text-gray-700 leading-relaxed">
      <%= markdown(@post.body) %>
    </div>
  </article>

  <!-- Mobile TOC Toggle Button (Fixed at bottom) -->
  <button
    type="button"
    class="lg:hidden fixed bottom-6 right-6 bg-primary-500 text-white p-4 rounded-full shadow-lg hover:bg-primary-600 transition-colors z-50"
    data-action="click->toc#toggleMobileToc">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
    </svg>
  </button>

  <!-- Mobile TOC Drawer -->
  <div
    data-toc-target="mobileDrawer"
    class="lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 hidden"
    data-action="click->toc#closeMobileToc">
    <div class="absolute right-0 top-0 bottom-0 w-80 bg-white shadow-xl p-6 overflow-y-auto" data-action="click->toc#stopPropagation">
      <div class="flex justify-between items-center mb-6">
        <h3 class="text-lg font-semibold text-gray-900">目录</h3>
        <button
          type="button"
          class="text-gray-500 hover:text-gray-700"
          data-action="click->toc#closeMobileToc">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      <nav data-toc-target="mobileNav" class="text-sm">
        <!-- TOC will be generated here by JavaScript -->
      </nav>
    </div>
  </div>
</div>
